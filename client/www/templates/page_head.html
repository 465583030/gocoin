<html><head><title>Gocoin {TESTNET}{VERSION}</title>
<script type="text/javascript" src="webui/gocoin.js"></script>
<link rel="stylesheet" href="webui/gocoin.css" type="text/css">
<script>
var sid='{SESSION_ID}'
var doc_title = document.title
function quickswitchwallet() {
	var sel = document.getElementById('qswal')
	document.location='?sid='+sid+'&qwalsel='+sel.options[sel.selectedIndex].value
}
</script>
</head>
<body>
<table align="center" width="1020" cellpadding="0" cellspacing="0"><tr><td>
	<table width="100%"><tr>
		<td>{MENU_LEFT}</td>
		<td align="center">Switch wallet:
		<select id="qswal" onchange="quickswitchwallet()">
		<!--QUICK_WALLET_SELECT-->
        </select>
        <img src="webui/refresh.png" class="hand" onclick="quickswitchwallet()" title="Reload current wallet">
		</td>
		<td align="center"><a href="javascript:pushtx()">LoadTx</a></td>
		<td align="right">
		<b id="blno">...</b> |
		{MENU_RIGHT} |
		<a href="{HELPURL}">Help</a></td>
	</tr></table>
<hr>
<script>
function refreshblock() {
	var aj = ajax()
	aj.onerror=function() {
		blno.innerText = "XXX"
		setTimeout(refreshblock, 10000)
	}
	aj.onload=function() {
		try {
			var stat = JSON.parse(aj.responseText)
			var difftxt = " changing in " + (2016-(stat.height%2016)) + " blocks"
			blno.innerText = stat.height
			blno.title = difftxt
			document.title = doc_title + ' @ ' + stat.height
			if (typeof(last_block_hash)!="undefined") {
				console.log(stat)
				last_block_hash.innerText = stat.hash
				last_block_timestamp.innerText = tim2str(stat.timestamp)
				last_block_height.innerText = stat.height
				last_block_difficulty.innerText = bignum(stat.diff)
				last_block_difficulty.title = difftxt
				var ago = stat.time_now - stat.received
				if (ago<120) {
					last_block_received.innerText = ago + ' sec'
				} else if (ago<2*3600) {
					last_block_received.innerText = (ago/60.0).toFixed(1) + ' min'
				}
			}
		} catch(e) {
			blno.title = e
			blno.innerText = "???"
			//console.log()
		}
		setTimeout(refreshblock, 1000)
	}
	aj.open("GET","status.json",true)
	aj.send(null)
}
refreshblock()

</script>